import { Story, Meta } from '@storybook/blocks';
import * as PointerInteractionStories from './PointerInteraction.stories';
 
<Meta of={PointerInteractionStories} />
 
# {'<PointerInteractionControl />'}

Base class that calls user-defined functions on down, move and up events. 
This class also manages "drag sequences".

When the handleDownEvent user function returns true a drag sequence is started. 
During a drag sequence the handleDragEvent user function is called on move events.
The drag sequence ends when the handleUpEvent user function is called and returns false. 

A react representative of of `new PointerInteraction(options)`.  
https://openlayers.org/en/latest/apidoc/module-ol_interaction_Pointer-PointerInteraction.html

<Story of={PointerInteractionStories.Primary} />

### Usage
```typescript
import { Coordinate } from 'ol/coordinate';
import Feature, { FeatureLike } from 'ol/Feature';
import { getMarkerImage } from '../../../lib/Marker';
import MapBrowserEvent from 'ol/MapBrowserEvent';
import { Geometry } from 'ol/geom';

export default function(props) {
  const pointFeature = new Feature( new Point([0, 0]));
  const lineFeature = new Feature( new LineString([ [-1e7, 1e6], [-1e6, 3e6] ])) ;
  const polygonFeature = new Feature(
    new Polygon([ [ [-3e6, -1e6], [-3e6, 1e6], [-1e6, 1e6], [-1e6, -1e6], [-3e6, -1e6] ] ]),
  );
  const source = new VectorSource({
    features: [pointFeature, lineFeature, polygonFeature],
  })

  const style = {
    'icon-src': getMarkerImage(),
    'icon-opacity': 0.6,
    'icon-anchor': [0.5, 32],
    'icon-anchor-x-units': 'fraction',
    'icon-anchor-y-units': 'pixels',
    'stroke-width': 2,
    'stroke-color': [255, 0, 0, 1],
    'fill-color': [0, 0, 255, 0.5],
  }

  let coordinate: Coordinate;
  let feature: FeatureLike;

  function handleDownEvent(evt: MapBrowserEvent<UIEvent>) {
    const _feature = evt.map.forEachFeatureAtPixel(evt.pixel, feature => feature);
    _feature && ([coordinate, feature] = [evt.coordinate, _feature]);
    return !!feature; // `true` to start the drag sequence.
  }

  function handleDragEvent(evt: MapBrowserEvent<UIEvent>) {
    const geometry = feature.getGeometry() as Geometry;
    const deltaX = evt.coordinate[0] - coordinate[0];
    const deltaY = evt.coordinate[1] - coordinate[1];
    geometry.translate(deltaX, deltaY);
    coordinate = evt.coordinate;
  }

  function handleMoveEvent(evt: MapBrowserEvent<UIEvent>) {
    const feature = evt.map.forEachFeatureAtPixel(evt.pixel, feature => feature);
    const element = evt.map.getTargetElement();
    element.style.cursor = feature ? 'pointer' : '';
  }

  function handleUpEvent() {
    coordinate = null;
    feature = null;
    return false; // return `false` to stop the drag sequence
  }

  return (
    <Map>
      <TileLayer source={new OSM()} />
      <VectorLayer source={source} style={style} />
      <View center={[0, 0]} zoom={2}/>
      <PointerInteraction
        handleDownEvent={handleDownEvent}
        handleDragEvent={handleDragEvent}
        handleMoveEvent={handleMoveEvent}
        handleUpEvent={handleUpEvent} />
    </Map>
  );
}
```

### props

You can pass any props defined in the 
[Openlayers documentation](https://openlayers.org/en/latest/apidoc/module-ol_interaction_Pointer-PointerInteraction.html)
