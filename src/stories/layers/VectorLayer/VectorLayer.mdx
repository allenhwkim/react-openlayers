import { Story, Meta } from '@storybook/blocks';
import * as VectorLayerStories from './VectorLayer.stories';
 
<Meta of={VectorLayerStories} />
 
# {'<VectorLayer />'}
 
A react representative of of `new VectorLayer(...)`  
https://openlayers.org/en/latest/apidoc/module-ol_layer_Vector-VectorLayer.html

<Story of={VectorLayerStories.Primary} />

<details>
  <summary>Source code</summary>
```typescript
import VectorSource from 'ol/source/Vector';
import GeoJSON from 'ol/format/GeoJSON';
import { Map, View, VectorLayer } from 'react-openlayers';
import { useRef } from 'react';

export default function(props) {
  const mapRef = useRef();
  const source = new VectorSource({
    url: 'https://openlayers.org/data/vector/ecoregions.json',
    format: new GeoJSON(),
  });

  return (
    <Map ref={mapRef}>
      <VectorLayer 
        source={source}
        background="#1a2b39"
        style={{'fill-color': ['string', ['get', 'COLOR'], '#eee']}}
        properties={{key: 'myLayer'}}
      />
      <View center={[0,0]} zoom={4}/>
    </Map>
  );
}
```
</details>

<br/><br/>
### Cluster Layer
<Story of={VectorLayerStories.ClusterLayer} />

<details>
  <summary>Source code</summary>
```typescript
import VectorSource from 'ol/source/Vector';
import { useRef } from 'react';
import Feature from 'ol/Feature';
import Point from 'ol/geom/Point';
import LineString from 'ol/geom/LineString';
import Polygon from 'ol/geom/Polygon';
import { OSM } from 'ol/source';
import KML from 'ol/format/KML';
import CircleStyle from 'ol/style/Circle';
import Cluster from 'ol/source/Cluster';
import Fill from 'ol/style/Fill';
import Style from 'ol/style/Style';
import Text from 'ol/style/Text';
import { Map, View, VectorLayer, TileLayer, getMarkerImage } from 'react-openlayers';

export default function(props) {

  function getClusterRadius(size) {
    const [minR, maxR, minIn, maxIn] = [10, 40, 1, 300]
    const inputRange = size / (maxIn - minIn);
    const output = minR + (maxR - minR) * inputRange;
    return Math.min(Math.max(output, minR), maxR);
  }

  const source = new Cluster({
    distance: 30,
    source: new VectorSource({
      url: 'https://openlayers.org/en/latest/examples/data/kml/2012_Earthquakes_Mag5.kml',
      format: new KML(),
    }),
  });

  const style = (feature) => {
    const size = feature.get('features').length;
  
    return new Style({
      image: new CircleStyle({
        radius: getClusterRadius(size),
        fill: new Fill({ color: size > 1 ? [255,0,0,0.5] : 'blue' }),
      }),
      text: new Text({text: size, fill: new Fill({color: '#FFF'})})
    });
  };

  return (
    <Map>
      <TileLayer source={new OSM()} />
      <VectorLayer source={source} style={style} />
      <View center={[0,0]} zoom={2}/>
    </Map>
  );
}
```
</details>

### props

| Prop   | type        | description |
| ------ | ----------- | ------------|
| source | TileSource  | Source for this layer. | 
| extent | Extent      | The bounding extent for layer rendering. The layer will not be rendered outside of this extent. |
| style  | StyleLike   | Layer style. When set to null, only features that have their own style will be rendered. |
| background  | string | Background color for the layer. If not specified, no background will be rendered. |
| zIndex | number      | The z-index for layer rendering. At rendering time, the layers will be ordered, first by Z-index and then by position. |
| properties | Object  | Arbitrary observable properties. Can be accessed with `#get()` and `#set()` |
| ...    | ...         | For more, refer to Openlayers documentation |

### props

You can pass any props defined in the 
[Openlayers documentation](https://openlayers.org/en/latest/apidoc/module-ol_layer_Vector-VectorLayer.html)